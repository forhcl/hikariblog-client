# hikariblog-client

## Project setup
```
npm install
```

### Compiles and hot-reloads for development
```
npm run serve
```

### Compiles and minifies for production
```
npm run build
```

### Run your unit tests
```
npm run test:unit
```

### Customize configuration
See [Configuration Reference](https://cli.vuejs.org/config/).



Markdown编辑器主要处理两个问题
1、首先是图片上传的问题，首先需要将图片上传到七牛云，同时文件删除的
时候也要将七牛云服务器上面的图片删除掉！！！头像的配置也和这个类似。
2、就是文章的保存问题了，同时在保存的时候需要选择标签、分类等信息。
分类是单选按钮、而标签为多选框。

七牛云图片上传相关：
  首先，由于申请的七牛云对象存储空间是一个公有空间，所以在上传的时候需要获取到上传凭证token才能进行上传，
但是在进行图片下载展示的时候就可以直接进行下载，无需下载凭证！！！
  然后参考七牛云开发者中心的编程模型，并不需要将图片上传到业务服务器，然后再上传到七牛云，可以先从业务服务器中申请上传凭证，然后客户端拿着上传凭证将图片上传到七牛云这样子可以节省带宽的中间消耗，节省人民币！！

### 这个模型的关键点如下：
整个架构中需要一个业务服务器组件。
无论如何，访问密钥（AK/SK）均不得包含在客户端的分发包中（如二进制代码、配置文件或网页中）。
SecretKey不得在任何场景中的公网上传输，更不得传输到客户端。
业务服务器端应维持一个用于管理资源元数据的数据库和一个用于管理最终用户账号信息的数据库。
原则上客户端和七牛云存储之间的交互只有上传和下载，不应使用任何其他的API。

华南区域客户端上传地址：http(s)://upload-z2.qiniup.com
上传后续动作中的内容组织和传递：变量


### 在七牛云存储中，整个上传流程大体分为这样几步：

业务服务器颁发上传凭证给客户端（终端用户）
客户端凭借上传凭证上传文件到七牛
在七牛获得完整数据后，根据用户请求的设定执行以下操作：
如果用户设定了 returnUrl ，七牛云存储将反馈一个指向returnUrl的HTTP 303，驱动客户端执行跳转。
如果用户设定了 callbackUrl] ，七牛云存储将向callbackUrl指定的地址发起一个HTTP 请求回调业务服务器，同时向业务服务器发送数据。发送的数据内容由 callbackBody 指定。业务服务器完成回调的处理后，可以在HTTP Response中放入数据，七牛云存储会响应客户端，并将业务服务器反馈的数据发送给客户端。
如果两者都没有设置，七牛云存储根据 returnBody 的设定向客户端发送反馈信息。
注意：回调到业务服务器的过程是可选的，它取决于业务服务器颁发的上传凭证。

如果没有回调，七牛会返回一些标准的信息（比如文件的 hash）给客户端。如果上传发生在业务服务器，以上流程可以自然简化为：

业务服务器生成上传凭证 不设置回调，自己回调到自己这里没有意义）
凭借上传凭证上传文件到七牛
善后工作，比如保存相关的一些信息

## 文章撰写过程中的图片上传
考虑到在博客中添加图片时可能并没有保存所以不需要回调业务服务器，
同时在编写博客文章时你来个重定向我肯定会捶死你，所以只需要返回一个图片url给客户端

到时候再慢慢将配置抽离出来，现在懒得搞
写死在里面算了
